const fs=require("fs"),path=require("path"),{SPACE_ID="",ACCESS_TOKEN=""}=process.env,FILE_NAME="contentfulEntries.json",LIMIT=800,entries={items:[],includes:{Asset:[]}},getEntries=(e=800,t=0)=>fetch(`https://cdn.contentful.com/spaces/${SPACE_ID}/environments/master/entries?access_token=${ACCESS_TOKEN}&limit=${e}&skip=${t}`).then((e=>e.json())).then((s=>{if(console.log(`Data fetched - limit: ${e}; skip: ${t} `),entries.items.push(...s?.items||[]),entries.includes.Asset.push(...s?.includes?.Asset||[]),s?.total>e+t)return getEntries(e,t+e)})),exec=()=>{SPACE_ID&&ACCESS_TOKEN?getEntries().then((()=>{fs.writeFileSync(path.resolve(__dirname,FILE_NAME),JSON.stringify(entries)),console.log(`Contentful data updated in ${FILE_NAME}`),console.log(`Total entry count: ${entries.items.length}`)})).catch((e=>{console.error(e)})):console.error("Please provide process.env.SPACE_ID and process.env.ACCESS_TOKEN")};exec();